# Clash兼容代理服务器配置文件

# 服务器基础配置
server:
  host: "0.0.0.0"          # 监听地址，0.0.0.0表示监听所有接口
  log_level: "info"        # 日志级别: debug, info, warning, error
  max_connections: 1000    # 最大连接数

# Shadowsocks配置
shadowsocks:
  enabled: true            # 是否启用Shadowsocks服务器
  port: 8388              # 监听端口
  method: "aes-256-gcm"   # 加密方法: aes-128-gcm, aes-256-gcm, chacha20-ietf-poly1305
  password: "MyStrongPassword123!"  # 密码，请使用强密码
  timeout: 300            # 连接超时时间（秒）

# VMess配置 (V2Ray协议)
vmess:
  enabled: false          # 是否启用VMess服务器
  port: 443              # 监听端口
  uuid: "12345678-1234-1234-1234-123456789abc"  # 用户ID，请生成新的UUID
  alter_id: 0            # 额外ID，推荐设为0
  tls: true              # 是否启用TLS
  cert_file: "/etc/ssl/certs/your-domain.crt"  # SSL证书文件路径
  key_file: "/etc/ssl/private/your-domain.key" # SSL私钥文件路径
  ws_path: "/vmess"      # WebSocket路径

# Trojan配置
trojan:
  enabled: false          # 是否启用Trojan服务器
  port: 443              # 监听端口（通常与HTTPS共用443）
  password: "MyTrojanPassword123!"  # Trojan密码
  cert_file: "/etc/ssl/certs/your-domain.crt"  # SSL证书文件路径
  key_file: "/etc/ssl/private/your-domain.key" # SSL私钥文件路径
  fallback_port: 80      # 回落端口（用于伪装）

# SOCKS5配置
socks5:
  enabled: true           # 是否启用SOCKS5服务器
  port: 1080             # 监听端口
  username: "user"       # 用户名（可选，留空表示无认证）
  password: "pass"       # 密码（可选）
  timeout: 300           # 连接超时时间（秒）

# HTTP代理配置
http:
  enabled: true           # 是否启用HTTP代理服务器
  port: 8080             # 监听端口
  username: "user"       # 用户名（可选，留空表示无认证）
  password: "pass"       # 密码（可选）
  timeout: 300           # 连接超时时间（秒）

# Web管理界面配置
dashboard:
  enabled: true           # 是否启用Web管理界面
  port: 9999             # 管理界面端口
  username: "admin"      # 管理员用户名（可选）
  password: "admin123"   # 管理员密码（可选）

# 安全配置
security:
  # IP白名单（可选，留空表示允许所有IP）
  allowed_ips: []
  # 示例: ["192.168.1.0/24", "10.0.0.0/8"]
  
  # 连接限制
  max_connections_per_ip: 10  # 每个IP最大连接数
  
  # 流量限制（可选，单位：MB/s）
  bandwidth_limit: 0      # 0表示无限制
  
  # 防重放攻击
  replay_protection: true

# 日志配置
logging:
  # 日志文件路径
  file: "clash_server.log"
  
  # 日志轮转
  max_size: "100MB"      # 单个日志文件最大大小
  backup_count: 5        # 保留的日志文件数量
  
  # 访问日志
  access_log: true       # 是否记录访问日志
  
# 性能优化配置
performance:
  # 工作进程数（0表示自动检测CPU核心数）
  workers: 0
  
  # 连接池大小
  connection_pool_size: 100
  
  # 缓冲区大小
  buffer_size: 8192
  
  # TCP配置
  tcp_nodelay: true      # 禁用Nagle算法
  tcp_keepalive: true    # 启用TCP保活

# 统计配置
statistics:
  enabled: true          # 是否启用统计功能
  
  # 统计数据保存间隔（秒）
  save_interval: 300
  
  # 统计数据文件
  data_file: "stats.json"
  
  # 保留统计数据天数
  retention_days: 30

# 高级配置
advanced:
  # DNS配置
  dns_servers:
    - "8.8.8.8"
    - "1.1.1.1"
    - "223.5.5.5"
  
  # 连接超时配置
  timeouts:
    connect: 10          # 连接超时（秒）
    read: 300           # 读取超时（秒）
    write: 300          # 写入超时（秒）
  
  # 缓存配置
  cache:
    dns_cache_size: 1000    # DNS缓存大小
    dns_cache_ttl: 300      # DNS缓存TTL（秒）

# 实验性功能
experimental:
  # 启用HTTP/2支持
  http2: false
  
  # 启用QUIC支持
  quic: false
  
  # 启用多路复用
  multiplex: false

# 配置文件版本（请勿修改）
version: "1.0.0"

# 配置说明：
# 1. 请根据实际需求启用相应的协议
# 2. 强烈建议修改默认密码
# 3. 如需启用TLS相关协议，请先配置SSL证书
# 4. 生产环境建议启用安全配置
# 5. 可根据服务器性能调整性能配置参数